{"ast":null,"code":"var _jsxFileName = \"/Users/bchi000/Downloads/prabhu_example/favorite_button/src/contribution_widget/contributions/ContributionsWidget.js\";\n/*global WASABI*/\nimport React from 'react';\nimport { appendScript } from '../utils/appendScript';\nimport { removeScript } from '../utils/removeScript';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ContributionsWidget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.shouldDisplay = () => {\n      // Set up properties that will be the same on all Wasabi calls.\n      WASABI.setOptions({\n        'applicationName': 'contributions',\n        'experimentName': 'charity_contributions_1',\n        'protocol': 'https',\n        'host': 'experimentation.bhn.technology:443'\n      });\n\n      // Check Wasabi to see if this user should be in the test and which bucket.\n      WASABI.getAssignment({\n        'userID': this.state.userid\n      }).then(response => {\n        console.log('getAssignment: success');\n        console.log(JSON.stringify(response));\n        // This object will include the assignment made and the status, which might tell you the experiment\n        // has not been started, etc.\n        // Note that if the experiment doesn't exist or hasn't been started, response.assignment is undefined, which is OK.\n        if (response.assignment === 'control') {\n          this.setState({\n            ctbt_state: 'none'\n          });\n          console.log(\"control group\");\n        } else if (response.assignment === 'test') {\n          this.setState({\n            ctbt_state: 'block'\n          });\n          console.log(\"test group\");\n          WASABI.postImpression({\n            'userID': this.state.userid\n          }).then(function (response) {\n            console.log('postImpression: success');\n            if (response) {\n              console.log(JSON.stringify(response));\n            }\n          }, function (error) {\n            console.log('postImpression: error');\n            console.dir(error);\n          });\n        } else {\n          this.setState({\n            ctbt_state: 'none'\n          });\n          console.log(\"no assignment\");\n        }\n        // else the user got the Control bucket, and we don't do anything.\n      }, error => {\n        console.log('getAssignment: error');\n        console.dir(error);\n        this.setState({\n          ctbt_state: 'none'\n        });\n      });\n    };\n    this.handleCheckboxChange = () => {\n      WASABI.postAction('ClickedOnContribute', null /* No extra action info */, {\n        'userID': this.state.userid\n      }).then(function (response) {\n        console.log('postAction: success');\n        if (response) {\n          console.log(JSON.stringify(response));\n        }\n      }, function (error) {\n        console.log('postAction: error');\n        console.dir(error);\n      });\n      this.setState(prevState => ({\n        isChecked: !prevState.isChecked\n      }));\n    };\n    this.state = {\n      isChecked: false,\n      ctbt_state: 'none',\n      userid: ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16))\n    };\n  }\n  componentDidMount() {\n    appendScript(\"jq\", \"https://code.jquery.com/jquery-1.12.3.min.js\");\n    document.getElementById(\"jq\").addEventListener('load', () => {\n      appendScript(\"ws\", \"https://experimentation.bhn.technology/scripts/wasabi.js\");\n      document.getElementById(\"ws\").addEventListener('load', () => {\n        // DTM is loaded\n        this.shouldDisplay();\n      });\n    });\n  }\n  componentDidUnmount() {\n    removeScript(\"https://code.jquery.com/jquery-1.12.3.min.js\");\n    removeScript(\"https://experimentation.bhn.technology/scripts/wasabi.js\");\n  }\n  render() {\n    const {\n      isChecked\n    } = this.state;\n    const {\n      label\n    } = this.props;\n    console.log('render called ' + this.state.ctbt_state);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"ctbt\",\n        style: {\n          display: `${this.state.ctbt_state}`\n        },\n        children: [\"Happiness doesnt result from what we get, but from what we give. BHN will give on your behalf\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: isChecked,\n            onChange: this.handleCheckboxChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), label]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default ContributionsWidget;","map":{"version":3,"names":["React","appendScript","removeScript","jsxDEV","_jsxDEV","ContributionsWidget","Component","constructor","props","shouldDisplay","WASABI","setOptions","getAssignment","state","userid","then","response","console","log","JSON","stringify","assignment","setState","ctbt_state","postImpression","error","dir","handleCheckboxChange","postAction","prevState","isChecked","replace","c","crypto","getRandomValues","Uint8Array","toString","componentDidMount","document","getElementById","addEventListener","componentDidUnmount","render","label","children","id","style","display","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange"],"sources":["/Users/bchi000/Downloads/prabhu_example/favorite_button/src/contribution_widget/contributions/ContributionsWidget.js"],"sourcesContent":["/*global WASABI*/\r\nimport React from 'react';\r\nimport {appendScript} from '../utils/appendScript'\r\nimport {removeScript} from '../utils/removeScript'\r\n\r\n\r\nclass ContributionsWidget extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      isChecked: false,\r\n      ctbt_state: 'none',\r\n      userid: ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\r\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n      )\r\n    };\r\n  }\r\n  componentDidMount () {\r\n    appendScript(\"jq\",\"https://code.jquery.com/jquery-1.12.3.min.js\");\r\n    document.getElementById(\"jq\").addEventListener('load', () => {\r\n      appendScript(\"ws\", \"https://experimentation.bhn.technology/scripts/wasabi.js\");\r\n      document.getElementById(\"ws\").addEventListener('load', () => {\r\n        // DTM is loaded\r\n        this.shouldDisplay();\r\n      });\r\n    });\r\n    \r\n  }\r\n  componentDidUnmount () {\r\n    removeScript(\"https://code.jquery.com/jquery-1.12.3.min.js\");\r\n    removeScript(\"https://experimentation.bhn.technology/scripts/wasabi.js\");\r\n  }\r\n\r\n  shouldDisplay = () => {\r\n    // Set up properties that will be the same on all Wasabi calls.\r\n    WASABI.setOptions({\r\n      'applicationName': 'contributions',\r\n      'experimentName': 'charity_contributions_1',\r\n      'protocol': 'https',\r\n      'host': 'experimentation.bhn.technology:443'\r\n    });\r\n\r\n    // Check Wasabi to see if this user should be in the test and which bucket.\r\n    WASABI.getAssignment({\r\n        'userID': this.state.userid\r\n    }).then(\r\n        (response) => {\r\n            console.log('getAssignment: success');\r\n            console.log(JSON.stringify(response));\r\n            // This object will include the assignment made and the status, which might tell you the experiment\r\n            // has not been started, etc.\r\n            // Note that if the experiment doesn't exist or hasn't been started, response.assignment is undefined, which is OK.\r\n            if (response.assignment === 'control') {\r\n              this.setState({\r\n                ctbt_state: 'none'  \r\n              });\r\n              console.log(\"control group\");\r\n                \r\n            }\r\n            else if (response.assignment === 'test') {\r\n                this.setState({\r\n                  ctbt_state: 'block'  \r\n                });\r\n                console.log(\"test group\");\r\n                WASABI.postImpression({\r\n                  'userID': this.state.userid\r\n                }).then(\r\n                    function(response) {\r\n                        console.log('postImpression: success');\r\n                        if (response) {\r\n                            console.log(JSON.stringify(response));\r\n                        }\r\n                    },\r\n                    function(error) {\r\n                        console.log('postImpression: error');\r\n                        console.dir(error);\r\n                    }\r\n                );\r\n            } else {\r\n              this.setState({\r\n                ctbt_state: 'none'  \r\n              });\r\n              console.log(\"no assignment\");\r\n            }\r\n            // else the user got the Control bucket, and we don't do anything.\r\n        },\r\n        (error) => {\r\n            console.log('getAssignment: error');\r\n            console.dir(error);\r\n            this.setState({\r\n              ctbt_state: 'none'  \r\n            });\r\n        }\r\n    );\r\n  }\r\n  handleCheckboxChange = () => {\r\n      WASABI.postAction(\r\n          'ClickedOnContribute',\r\n          null /* No extra action info */,\r\n          {\r\n              'userID': this.state.userid\r\n          }\r\n      ).then(\r\n          function (response) {\r\n              console.log('postAction: success');\r\n              if (response) {\r\n                  console.log(JSON.stringify(response));\r\n              }\r\n          },\r\n          function (error) {\r\n              console.log('postAction: error');\r\n              console.dir(error);\r\n          }\r\n      );\r\n\r\n\r\n    this.setState(prevState => ({\r\n      isChecked: !prevState.isChecked\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { isChecked } = this.state;\r\n    const { label } = this.props;\r\n    console.log('render called ' + this.state.ctbt_state )\r\n    return (\r\n      <div>\r\n        <div id=\"ctbt\" style={{ display: `${ this.state.ctbt_state }` }}>\r\n          Happiness doesnt result from what we get, but from what we give. BHN will give on your behalf  \r\n          <br/>\r\n\r\n          <label>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={isChecked}\r\n              onChange={this.handleCheckboxChange}\r\n            /> \r\n            {label}\r\n          </label>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContributionsWidget;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}